# Activer le module rewrite
RewriteEngine On

# Rediriger les requêtes API vers le serveur Flask
RewriteRule ^api/rhscrap/search$ http://127.0.0.1:5000/rhscrap/search [P,L]

# Servir les fichiers statiques directement
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^static/(.*)$ static/$1 [L]

# Permettre l'accès aux fichiers de résultats
<Directory "results">
    Options +Indexes
    AllowOverride None
    Require all granted
</Directory>

# Protéger les fichiers Python
<FilesMatch "\.py$">
    Require all denied
</FilesMatch>

# Headers pour CORS
Header set Access-Control-Allow-Origin "*"
Header set Access-Control-Allow-Methods "GET, POST, OPTIONS"
Header set Access-Control-Allow-Headers "Content-Type"

# Activer le mode proxy
ProxyPass /api/rhscrap/search http://127.0.0.1:5000/rhscrap/search
ProxyPassReverse /api/rhscrap/search http://127.0.0.1:5000/rhscrap/search 
